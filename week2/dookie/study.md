# Spring Framework의 테스트

## 1. 개요

스프링 개발자라면 테스트 작성 방법과 이를 효과적으로 개발에 활용할 수 있는 전략을 알아야 하며, 이를 실전에 적용할 수 있도록 노력해야 한다. 실제로 필자(dookie)의 경우 스프링 프레임워크를 학습하며 tomcat 서버에 애플리케이션을 올리고 내리는 과정과 디버깅 프로세스를 거쳐 학습 테스트를 진행했다. 이러한 방식은 매우 번거로운 작업인 만큼, 이번 JUnit에서 제공하는 테스트가 얼마나 도움이 될 수 있는지 설명하는 챕터가 되겠다. 서적의 필자(토비)는 테스트의 유형 중 학습 테스트와 버그 테스트를 언급했다. 먼저 이를 살펴보자.

## 2. 테스트

### 2.1 학습 테스트

우리는 자신이 개발하지 않은 프레임워크나 라이브러리에 대해서도 테스트를 작성해야 한다. 테스트를 제공하는 JUnit의 경우도 설정과 관련된 어노테이션이 존재하고 동작 방식이 존재하는 만큼 JUnit 테스트를 공부하기 위한 테스트를 작성하는 절차도 서적에서 살펴볼 수 있었다. 그렇다면 이러한 학습 테스트를 하는 이유가 뭘까?

- **다양한 조건에 따른 기능을 손쉽게 확인해볼 수 있다**

  > 필자의 경험을 살펴보면 테스트 라이브러리보다도 실행에 걸쳐 디버깅하는 프로세스의 과정에서는 수동으로 값을 입력하거나 코드를 계속 수정해가며 애플리케이션을 다시 실행해야 하는 문제가 발생한다. 학습 테스트는 자동화된 테스트 코드로 만들어지므로 다양한 조건을 추가하여 기능이 어떻게 동작하는지 빠르게 식별할 수 있다.

- **학습 테스트 코드를 개발 중에 참고할 수 있다**

        앞서 언급한 JUnit의 학습 테스트를 위한 테스트를 예시로 들 수 있겠다. 관련된 설정파일과 초기화 방법, API 호출 방법은 어떻게 되는지, 결과는 어떻게 가져올 수 있는지와 같은 학습을 위한 샘플 코드가 테스트 안에 모두 만들어진다.

- **프레임워크나 제품을 업그레이드할 때 호환성 검증을 도와준다**

        새로운 버전으로 업그레이드할 때 기존의 개발 명세와 내용이 상이한 부분이 발생한다. 이로 인해 사용하던 애플리케이션에서 문제가 발생하게 되는데, 이런 경우에는 문제가 없던 이전 버전으로 다운 그레이드를 해야 한다. 만약 학습 테스트를 이용한 테스트 코드를 작성해놓은 상태라면 새로운 버전을 적용을 하지 않고도 API에 문제가 없다는 사실을 미리 확인해볼 수 있다.

#

### 2.2 버그 테스트

오류가 있을 때 그 오류를 잘 드러내줄 수 있는 테스트를 말한다. 기능 오류가 발견되었을 때, 무턱대고 코드를 뒤져가면서 수정하려 하기 보다는 먼저 버그 테스트를 만들어보는 편이 유용하다.

- **버그 내용을 명확하게 분석하게 해준다**

        개인적으로 버그를 해결할 때 당시 상황을 재현하는 방법과 디버깅을 거쳐 문제를 해결하는 방법을 사용했다. 그러나 별다른 애플리케이션의 실행 없이 테스트 코드를 작성하게 되면 버그의 내용을 명확하게 분석해보고 이후 테스트 기법(동등분할, 경계값 분석 등)을 적용해보는 방법을 생각해볼 수 있다.

- **기술적인 문제를 해결하는 데 도움이 된다**

        코드의 설정을 확인했을 때 별다른 문제가 없거나 기술적으로 다루기 힘든 버그의 유형에서 동일한 문제가 발생하는 단순한 코드를 만들어보면 도움이 될 수 있다.

#

## 3. JUnit

자바의 단순하면서도 실용적인 테스트를 위한 도구 중 JUnit이라는 자바 테스팅 프레임워크가 존재한다. 이름 그대로 자바로 단위 테스트를 만들 때 유용하게 사용할 수 있다. JUnit의 테스트 메서드임을 알리는 메서드의 설정 방법을 살펴보자

    1. @Test 어노테이션이 붙어 있어야 한다
    2. 접근 지시자가 public으로 선언되어 있어야 한다
    3. 반환 타입이 void이어야 한다
    4. 매개변수가 없어야 한다

    public class JUnitTestClass {

        @Test
        public void someMethod() {
            // Unit Testing Logic.
        }
    }

## 3.1 JUnit 애플리케이션 컨텍스트

JUnit의 경우 테스트에 사용되는 픽스처를 생성할 때 서로 다른 테스트 메서드마다 새로운 오브젝트 객체를 생성하는 방법을 사용한다. 서적에서는 이를 학습 테스트를 통해 확인해볼 수 있었는데 아래의 소스코드를 살펴보자

#

적을 내용

    JUnit 테스트 성능 문제
    애플리케이션 컨텍스트
